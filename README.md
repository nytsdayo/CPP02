# CPP02

## Rule

### Orthodox Canonical Form (正統的正準形) とは
C++において、クラスが適切にリソース管理を行うための設計パターンです。以下の4つの特別なメンバー関数を適切に実装することを指します：
1. **デフォルトコンストラクタ**: オブジェクトを初期化
2. **コピーコンストラクタ**: 別のオブジェクトからコピーを作成
3. **コピー代入演算子**: 既存のオブジェクトに別のオブジェクトを代入
4. **デストラクタ**: オブジェクトが破棄される際のクリーンアップ

1. デフォルトコンストラクタ
- 目的: オブジェクトを引数なしで初期化する
- 役割: メンバー変数を適切な初期値に設定
- 重要性: オブジェクトが未定義状態にならないよう保証
- 例: Fixed a; のような宣言で呼び出される

2. **コピーコンストラクタ** `Fixed(const Fixed& other);`
   - **何をするか**: 既存のオブジェクトをお手本にして、全く同じ新しいオブジェクトを作る
   - **いつ呼ばれるか**: 
     * `Fixed b(a);` ← aをコピーしてbを作る
     * `Fixed b = a;` ← 初期化時の代入（実はコピーコンストラクタ）
     * 関数の引数で値渡しするとき
   - **なぜ必要**: オブジェクトを「複製」する標準的な方法を提供

3. **コピー代入演算子** `Fixed& operator=(const Fixed& other);`
   - **何をするか**: すでに存在するオブジェクトに、別のオブジェクトの値を上書きコピー
   - **いつ呼ばれるか**:
     * `a = b;` ← すでにあるaにbの値を代入
     * `a = b = c;` ← 連鎖代入も可能
   - **重要なポイント**: 
     * 自己代入（`a = a;`）をチェックして安全に処理
     * 戻り値は自分自身の参照（連鎖代入を可能にするため）

4. デストラクタ
- 目的: オブジェクトが破棄される際の後始末
- 役割: 動的メモリの解放やリソースのクリーンアップ
- 重要性: メモリリークや資源漏れを防ぐ
- 例: オブジェクトがスコープを出る際に自動的に呼び出される

- なぜこの4つが必要なのか？
	- RAII原則: Resource Acquisition Is Initialization 
		- リソースの取得と初期化を一体化
	- メモリ安全性: 適切な初期化と解放を保証
	- 値セマンティクス: オブジェクトを値として扱える
	- 予期しない動作の防止: コンパイラが自動生成するデフォルト実装では不適切な場合がある
この4つを適切に実装することで、安全で予測可能なクラスの動作を保証できます。

## Subject Summary

ex00: Orthodox Canonical Formでの最初のクラス: 固定小数点数を表すFixedクラスを作成します。プライベートメンバーとして固定小数点数の値と、分数ビット数（定数8）を格納する静的定数整数を持ち、正準な形式のパブリックメンバー関数を実装します。getRawBitsとsetRawBitsメンバー関数も含まれます。

ex01: より実用的な固定小数点数クラスへ: Fixedクラスに、整数と浮動小数点数を引数にとるコンストラクタ、toFloat()、toInt()メンバー関数、そして挿入（<<）演算子のオーバーロードを追加します。

ex02: いよいよ本番: Fixedクラスに6つの比較演算子、4つの算術演算子、4つのインクリメント/デクリメント演算子（前置・後置）のオーバーロードを追加します。また、2つのFixed数を引数にとり、最小または最大の値を返す静的メンバー関数minとmaxも実装します。

ex03: BSP: 機能的なFixedクラスを使用して、2Dポイントを表すPointクラスを正準な形式で作成します。そして、点が三角形の内部にあるかどうかを判定するbsp関数を実装します。